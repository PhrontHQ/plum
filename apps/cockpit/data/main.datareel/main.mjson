{
    "AuthenticationPolicy": {
        "object": "montage/data/service/user-authentication-policy"
    },

    "phrontClientIdentityService": {
        "object": "montage/data/service/u-r-l-search-param-identity-service.mjson",
        "values": {
            "searchParamName": "appointment_guid",
            "identityQuery": {"=":"@identityQuery"},
            "authorizationPolicy": {"=":"@AuthenticationPolicy.ON_DEMAND"}
        }        
    },
    "identityQuery": {
        "prototype": "montage/data/model/data-query",
        "values": {
            "type": {"@": "ServiceEngagementDescriptor"},
            "criteria": {"@": "dataIdentityQueryCriteria"}
        }
    },

    "ServiceEngagementDescriptor": {
        "object": "phront/data/main.datareel/model/service-engagement.mjson"
    },

    "dataIdentityQueryCriteria": {
        "prototype": "montage/core/criteria",
        "values": {
            "expression": "originId == $.originId",
            "parameters": {"<-":"{originId: @phrontClientIdentityService.searchParamValue}"}
        }
    },

    "AWSAPIGatewayWebSocketDataOperationService": {
        "object": "phront/data/main.datareel/a-w-s-a-p-i-gateway-web-socket-data-operation-service.mjson",
        "values": {
            "authorizationPolicy": {"=":"@AuthenticationPolicy.ON_DEMAND"},
            "connectionDescriptor": {
                "staging": {
                    "websocketURL": "wss://aibqczt09g.execute-api.us-west-2.amazonaws.com/staging"
                },
                "dev": {
                    "websocketURL": "wss://phront.local:3001"
                }
            }
        }        
    },

    "root": {
        "prototype": "montage/data/service/data-service",
        "values": {
            "name": "PlumDataService",
            "isUniquing": true,
            "childServices": [
                {"@": "phrontClientIdentityService"},
                {"@": "AWSAPIGatewayWebSocketDataOperationService"}
            ]
        }
    }
}